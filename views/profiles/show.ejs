<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<h3 class="fw-bold text-white pt-2"><%= profile.name %></h3>
<h3 class="fw-bold text-white pt-2"><%= profile.location %></h3>
<h3 class="fw-bold text-white pt-2"><%= profile.bio %></h3>

<% if (user) { %>
<a href="/profiles/<%= profile._id %>/edit">
  <button>Edit Profile</button>
</a>
<% } %>

<h3 class="fw-bold text-white pt-2"><%= profile.name %>'s Collection</h3>


<div class="container bg-dark" id="formdiv">
    <table class="table table-striped table-dark" id="list">
      
      <thead>
        <tr>
          <th scope="col">Artist</th>
          <th scope="col">Title</th>
          <th scope="col">Released</th>
          <th scope="col">Label</th>
          <th scope="col">Genre</th>
          <th scope="col">Format</th>
          <th scope="col">Reviews</th>
          <th scope="col">Remove</th>
        </tr>
      </thead>
      <tbody>
        <% profile.shelf.forEach((record) => { %>
        <tr>
          <td>
            <form action="/records/artistClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="artist" value="<%= record.artist %>">
            </form>
          </td>
          <td><a href="/records/<%= record._id %>" class="link-info"><%= record.title %></a></td>
          <td>
            <form action="/records/yearClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="originalYear" value="<%= record.originalYear %>">
            </form>
          </td>
          <td>
            <form action="/records/labelClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="label" value="<%= record.label %>">
            </form>
          </td>
          <td>
            <form action="/records/genreClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="genre" value="<%= record.genre %>">
            </form>
          </td>
          <td><%= record.format %></td>
          <td>
            <a href="/records/<%= record._id %>" class="link-info">
                <%= record.reviews.length %>
            </a>
            </td>
            <td>
              <form class="" action="/records/<%= record._id %>/removeFromCollection" method="POST" name="recordId">
                <button>Remove</button><br>
              </form>
            </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
</div>


<div class="container bg-dark" id="formdiv">
    <table class="table table-striped table-dark" id="list">
      <thead>
        <tr>
          <th scope="col">Artist</th>
          <th scope="col">Title</th>
          <th scope="col">Released</th>
          <th scope="col">Label</th>
          <th scope="col">Genre</th>
          <th scope="col">Format</th>
          <th scope="col">Reviews</th>
          <th scope="col">Remove</th>
        </tr>
      </thead>
      <tbody>
        <% profile.wishlist.forEach((record) => { %>
        <tr>
          <td>
            <form action="/records/artistClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="artist" value="<%= record.artist %>">
            </form>
          </td>
          <td><a href="/records/<%= record._id %>" class="link-info"><%= record.title %></a></td>
          <td>
            <form action="/records/yearClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="originalYear" value="<%= record.originalYear %>">
            </form>
          </td>
          <td>
            <form action="/records/labelClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="label" value="<%= record.label %>">
            </form>
          </td>
          <td>
            <form action="/records/genreClickSearch" method="POST" class="d-flex mx-4">
              <input type="submit" name="genre" value="<%= record.genre %>">
            </form>
          </td>
          <td><%= record.format %></td>
          <td>
            <a href="/records/<%= record._id %>" class="link-info">
                <%= record.reviews.length %>
            </a>
            </td>
            <td>
              <form class="" action="/records/<%= record._id %>/removeFromWishlist" method="POST" name="recordId">
                <button>Remove</button><br>
              </form>
            </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
</div>

<%- include('../partials/footer') %>